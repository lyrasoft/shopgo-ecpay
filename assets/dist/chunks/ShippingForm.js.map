{"version":3,"file":"ShippingForm.js","sources":["../../src/enum/EcpayShippingType.ts","../../src/components/ShippingForm.vue"],"sourcesContent":["export enum EcpayShippingType {\n  TCAT = 'TCAT',         // 黑貓\n  POST = 'POST',         // 中華郵政\n  UNIMART = 'UNIMART',   // 統一超商\n  FAMI = 'FAMI',         // 全家超商\n  HILIFE = 'HILIFE',     // 萊爾富超商\n  OKMART = 'OKMART'      // OK超商\n}\n\nexport function isCvs(type: EcpayShippingType): boolean {\n  return [\n    EcpayShippingType.UNIMART,\n    EcpayShippingType.FAMI,\n    EcpayShippingType.HILIFE,\n    EcpayShippingType.OKMART\n  ].includes(type);\n}\n","<script setup lang=\"ts\">\nimport { computed, ref } from 'vue';\nimport { isCvs } from '~shopgo-ecpay/enum';\nimport { CvsStoreReturn, EcpayShippingParams, Shipping } from '~shopgo-ecpay/types';\n\nconst props = defineProps<{\n  uid: string;\n  shipping: Shipping<EcpayShippingParams>;\n  mapRoute: string;\n  callback: string;\n}>();\n\nconst gateway = computed(() => props.shipping.params.gateway);\nconst isCvsType = computed(() => isCvs(gateway.value));\nconst data = ref<CvsStoreReturn>();\n\nfunction mapSelect() {\n  window.open(props.mapRoute, '', `width=900, height=600, top=300, left=300`);\n\n  // @ts-ignore\n  window[props.callback] = function(storeData: CvsStoreReturn) {\n    data.value = storeData;\n  };\n}\n\n</script>\n\n<template>\n<div v-if=\"isCvsType\">\n  <div :id=\"`shipping-form-${uid}`\" class=\"l-shipping-form d-flex gap-3 align-items-center\">\n    <div class=\"l-shipping-form__button\">\n      <button type=\"button\" class=\"btn btn-outline-primary\" style=\"width: 135px\"\n        @click=\"mapSelect\">\n        選擇門市\n      </button>\n    </div>\n\n    <div class=\"l-shipping-form__info\">\n      <template v-if=\"data\">\n        <div class=\"d-flex gap-2 align-items-center\">\n          <h6 class=\"m-0\">{{ data.CVSStoreName }}</h6>\n          <p class=\"text-muted m-0\">{{ data.CVSAddress }}</p>\n\n          <input name=\"checkout[shipping][CVSAddress]\" type=\"hidden\" :value=\"data.CVSAddress\" />\n          <input name=\"checkout[shipping][CVSOutSide]\" type=\"hidden\" :value=\"data.CVSOutSide\" />\n          <input name=\"checkout[shipping][CVSStoreID]\" type=\"hidden\" :value=\"data.CVSStoreID\" />\n          <input name=\"checkout[shipping][CVSStoreName]\" type=\"hidden\" :value=\"data.CVSStoreName\" />\n          <input name=\"checkout[shipping][CVSTelephone]\" type=\"hidden\" :value=\"data.CVSTelephone\" />\n          <input name=\"checkout[shipping][LogisticsSubType]\" type=\"hidden\" :value=\"data.LogisticsSubType\" />\n        </div>\n      </template>\n      <template v-else>\n        <span class=\"text-danger\">請選擇送貨門市</span>\n        <input type=\"text\" value=\"\" class=\"d-none\" required data-validation-message=\"請先選擇送貨門市\" />\n      </template>\n    </div>\n  </div>\n</div>\n</template>\n\n<style scoped>\n\n</style>\n"],"names":["isCvs","type","props","__props","gateway","computed","isCvsType","data","ref","mapSelect","storeData","_hoisted_3","_hoisted_5","_hoisted_6","$setup","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","$props","_hoisted_4","_toDisplayString","_cache","_createTextVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment"],"mappings":"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"}